# 车牌识别

本目录包含基于 **CCPD2020** 数据集 (Test部分) 的车牌识别评估代码。为了量化“检测环节”对最终识别结果的影响，设计了两种对比评估方案：

1.  **evaluate1.py**：**端到端评估**。使用 PaddleOCR 同时完成“车牌位置检测” + “车牌字符识别”。
2.  **evaluate2.py**：**仅识别评估**。利用 CCPD2020 数据集提供的真值坐标 (Ground Truth) 裁剪车牌，仅测试识别模型的理论上限。

---

## 1. 环境配置 

实际实验环境如下：

- **OS**: Ubuntu 22.04
- **GPU**: NVIDIA RTX 4090
- **CUDA**: 12.4
- **Python**: 3.10 
- **深度学习框架及依赖**:
  - `paddlepaddle-gpu` (CUDA 11.8 版本，兼容性运行)
  - `paddleocr`

---

## 2. 实验输出与文件说明
- `err1/`  
  由 **evaluate1.py** 生成的错误样本可视化图片，主要错误类型包括：
  1. 未能正确检测到车牌；
  2. 车牌检测到位，但识别结果错误，例如：
     - 省份汉字识别错误；
     - 字符 `0` 与 `D` / `O` 混淆等。

- `err2/`  
  由 **evaluate2.py** 生成的错误样本可视化图片。  
  此时车牌位置使用 CCPD2020 的真值框，仅反映**识别模型本身**的错误情况。


- 评估结果 txt  
  - `final_report1.txt`：**evaluate1.py** 的整体评估结果（整牌准确率、字符级准确率、耗时等统计指标）；  
  - `final_report2.txt`：**evaluate2.py** 的整体评估结果。  


---

## 3. 现状分析
1.  **检测环节的损耗**: `evaluate1` 与 `evaluate2` 的全字匹配率相差约 **4.7%**。查看可视化结果发现 PaddleOCR 的通用文本检测模型在定位车牌时存在一定的误差（例如：误将车身上的广告文字、标语识别为车牌，或者框选范围不精准无法识别车牌位置）。
2.  **识别能力的瓶颈**: 即便是在拥有完美定位（使用 GT 框）的 `evaluate2` 中，准确率上限也仅为 **91.96%**。这表明主要的性能瓶颈在于**识别模型**本身，而非检测模型。
3.  **数据集难点**: 经人工排查，CCPD2020 数据集中包含一些**模糊不清**的样本，部分图片即使是人眼也难以准确辨认。

## 4. 未完成部分

### 4.1 功能上尚未完成的部分

1. **视频流检测**

2. **模型训练与系统级优化**

---

### 4.2 检测与识别效果的提升方向

1. **优化检测器（让 evaluate1 更接近 evaluate2）**
   - 问题：PaddleOCR 自带的是**通用文本检测器**，在车牌场景中容易受到车身文字、路牌、广告牌等背景文字的干扰，导致误检/漏检，从而拉低端到端准确率。
   - 方案：
     - 使用专门的目标检测模型（如 **YOLOv8 / YOLOv10** 等）单独训练“车牌检测器”，只检测车牌这一类目标；

     - 在检测阶段：增加对候选框的规则筛选，如长宽比范围、面积阈值、相对位置约束等，使 evaluate1 的输入更接近 evaluate2 中的“真值车牌框”

2. **微调识别模型（Finetune）**
   - 问题：在使用真值车牌框的前提下，整牌准确率的上限约为 **91.96%**，说明识别模型本身在遮挡、模糊等极端样本上仍存在瓶颈。